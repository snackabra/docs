<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="System Architecture" href="system-architecture.html" /><link rel="prev" title="Installation" href="install.html" />

    <meta name="generator" content="sphinx-4.4.0, furo 2022.01.02"/>
        <title>Technical Details - snackabra 0.4.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=df49af52631e7917044a9c21a57f7b83170a6dd0" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=fade93df149f7c5fedb3ff897f799dc7d283b420" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">snackabra 0.4.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">snackabra 0.4.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Technical Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="system-architecture.html">System Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="discussion.html">Discussion</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact and Feedback</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="future.html">Future Work</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References / Further Reading</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">LICENSE</a></li>
<li class="toctree-l1"><a class="reference internal" href="pylib.html">Python Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix-a-crypto.html">Appendix A: Cryptography</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-guide.html">Appendix B: Privacy.App Chat Room User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="diag-sample.html">(ignore)</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="technical-details">
<span id="techdetails"></span><h1>Technical Details<a class="headerlink" href="#technical-details" title="Permalink to this headline">¶</a></h1>
<p>You should have read <a class="reference internal" href="overview.html#overview"><span class="std std-ref">the technical overview</span></a> before
this section. Here we will fill in some nitty-gritty details that
aren’t covered elsewhere.</p>
<section id="rooms">
<span id="id1"></span><h2>Rooms<a class="headerlink" href="#rooms" title="Permalink to this headline">¶</a></h2>
<p>All communication is centered around a <a class="reference internal" href="glossary.html#term-Room"><span class="xref std std-term">Room</span></a>.</p>
<p>The <a class="reference internal" href="glossary.html#term-Room-Name"><span class="xref std std-term">Room Name</span></a> is a 48-byte <a class="footnote-reference brackets" href="#f011" id="id2">2</a> URI <a class="footnote-reference brackets" href="#f012" id="id3">3</a> encoded in 64
characters of b64 <a class="footnote-reference brackets" href="#f013" id="id4">4</a>. This name is globally unique <a class="footnote-reference brackets" href="#f014" id="id5">5</a>, including
across servers.</p>
<p>An example would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Raih2xfY6D8aKVIlkIeDLIbSpt0qNmU2mUTXYiJQoNSU</span><span class="o">-</span><span class="n">SgyTLC0FReui0OhX1Q8</span>
</pre></div>
</div>
<p>We variously refer to this identifier as “&lt;room&gt;”, “&lt;roomId&gt;”, “room
identifier”, or “room name”.</p>
<p>This URI is generated using (Python) <code class="docutils literal notranslate"><span class="pre">secrets.token_urlsafe</span></code>
<a class="footnote-reference brackets" href="#f010" id="id6">1</a> in the <a class="reference internal" href="overview.html#command-line"><span class="std std-ref">command line tools</span></a>.
(UPDATE: this is changing to be derived from a generated owner public key.)</p>
<p>The location (server) where a room is created is called the
<a class="reference internal" href="glossary.html#term-Origin-Server"><span class="xref std std-term">Origin Server</span></a>. Note that the identity of the origin server is
in no manner reflected in the name of a room. <a class="footnote-reference brackets" href="#f015" id="id7">6</a></p>
<p>The same &lt;room&gt; identifier is used on different servers: if you
have a staging environment for your front end code, for example,
but share backend databases.</p>
<p>The main MI service hosts rooms here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="o">//</span><span class="n">s</span><span class="o">.</span><span class="n">privacy</span><span class="o">.</span><span class="n">app</span><span class="o">/&lt;</span><span class="n">room</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Or you can run a <a class="reference internal" href="glossary.html#term-Personal-Room-Server"><span class="xref std std-term">Personal Room Server</span></a> if you like.</p>
<p id="owner-definition">An <a class="reference internal" href="glossary.html#term-Owner"><span class="xref std std-term">Owner</span></a> is a verified user, authenticated in some manner;
for a public server typically through an <a class="reference internal" href="glossary.html#term-SSO"><span class="xref std std-term">SSO</span></a></p>
<p>Our baseline use case is an MI Member
<a class="reference external" href="https://privacy.app">https://privacy.app</a> where owners are authenticated with an MI
membership number, an assigned Yubico hardware security key, and PIN
code. However, the intent of this design is that it should be
stand-alone from any particulars of authentication, but it does assume
the presence of some such authentication.
For example, for a <a class="reference internal" href="glossary.html#term-Personal-Room-Server"><span class="xref std std-term">Personal Room Server</span></a>, it’s a server secret
that the admin of the site has.</p>
<p>Room identifiers are unique, global, and persistent. <a class="footnote-reference brackets" href="#f016" id="id8">7</a> They are
transportable in a natural way: no matter how many people host a
service using this design, the probability of any new rooms from any
two services colliding is practically zero. Both our current web app and iOS clients
support export / import of conversations. See our discussion on
<a class="reference internal" href="discussion.html#micro-federation"><span class="std std-ref">micro-federation</span></a>.</p>
<p>The <a class="reference internal" href="overview.html#command-line"><span class="std std-ref">command line tools</span></a> include support
for generating “business cards” with QR codes for a room, the
idea being that you can share these with people you meet, instead
of <a class="reference internal" href="glossary.html#term-PII"><span class="xref std std-term">PII</span></a> like emails or phone numbers.</p>
</section>
<section id="room-and-user-keys">
<h2>Room and User Keys<a class="headerlink" href="#room-and-user-keys" title="Permalink to this headline">¶</a></h2>
<p>The two basic key <em>types</em> are:</p>
<ul class="simple">
<li><p>Public keys:</p>
<ul>
<li><p>RSA public-key pair, using SECG curve secp3841 (aka NIST P-384)
This pair is generated by <a class="reference internal" href="pylib.html#snackabra.crypto.gen_p384_pair" title="snackabra.crypto.gen_p384_pair"><code class="xref py py-func docutils literal notranslate"><span class="pre">snackabra.crypto.gen_p384_pair()</span></code></a>.</p></li>
<li><p>Python library: <code class="docutils literal notranslate"><span class="pre">ec.generate_private_key(ec.SECP384R1())</span></code> <a class="footnote-reference brackets" href="#f021" id="id9">12</a></p></li>
<li><p>NSS (Firefox) currently supports NIST curves P-256, P-384,
P-521. However, apparently P-521 is not widely supported <a class="footnote-reference brackets" href="#f017" id="id10">8</a>  as it is
not part of “NIST Suite B”. <a class="footnote-reference brackets" href="#f018" id="id11">9</a></p></li>
<li><p>ECDH is used to agree on a key <a class="footnote-reference brackets" href="#f019" id="id12">10</a>
between two parties <a class="footnote-reference brackets" href="#f020" id="id13">11</a>.</p></li>
</ul>
</li>
<li><p>Encryption keys:</p>
<ul>
<li><p>AES 256-bit (A256GCM) symmetric key</p></li>
<li><p>Currently generated using jwk <a class="footnote-reference brackets" href="#f022" id="id14">13</a>
library (it’s just 256
random bits). Generated by <a class="reference internal" href="pylib.html#snackabra.crypto.gen_aes_key_jwk" title="snackabra.crypto.gen_aes_key_jwk"><code class="xref py py-func docutils literal notranslate"><span class="pre">snackabra.crypto.gen_aes_key_jwk()</span></code></a>.</p></li>
</ul>
</li>
</ul>
<p>Key instances, the following are pre-generated and stored by the <a class="reference internal" href="glossary.html#term-SSO"><span class="xref std std-term">SSO</span></a>:</p>
<ul class="simple">
<li><p>&lt;room&gt;_ownerKey  - <em>[Public key pair]</em></p>
<ul>
<li><p>public room key, used to claim ownership of the room, and to verify anything signed by the Owner</p></li>
<li><p><em>(existence of this does not imply that the Durable Object for the
room has been created, but it means it will be created when
accessed)</em></p></li>
<li><p>private half of this is stored in Owner (SSO) data only</p></li>
<li><p>When owner joins room, private half stored in Owner’s
local_storage as &lt;room&gt;_room</p></li>
<li><p>The public half of this key is also stored in the localstorage</p></li>
<li><p>Owner can secure key management by generating a new key pair and
saving the public half as a new entry in the KV_global as
&lt;room&gt;_ownerKey&lt;ts&gt;, where ts is the timestamp when they updated
the key. The private half of this newly generated pair will be
saved only in their localstorage. <a class="footnote-reference brackets" href="#f023" id="id15">14</a></p></li>
</ul>
</li>
<li><p>&lt;room&gt;_signKey - <em>[Public key pair]</em></p>
<ul>
<li><p>The private room signing key, used by visitors to sign back and
forth (or more accurately, to derive a unique signing key).</p></li>
<li><p>All participants have access to this key (both halves).</p></li>
</ul>
</li>
<li><p>&lt;room&gt;_encryptionKey - <em>[Encryption key]</em></p>
<ul>
<li><p>The durable object keeps an encryption key, used for end to end
encryption <a class="footnote-reference brackets" href="#f024" id="id16">15</a> unless the Owner has taken
control of their key management</p></li>
</ul>
</li>
<li><p>&lt;room&gt;_authorizationKey - <em>[Public key pair]</em></p>
<ul>
<li><p>used to prove ownership of a room (SSO backend-&gt;Chat CF backend)</p></li>
<li><p>Only SSO backend has private key; SSO can verify it’s authority to
the Chat CF backend by signing a cookie (or in future, have other
admin APIs)</p></li>
</ul>
</li>
</ul>
<p>The following keys may eventually populate the room (KV_local):</p>
<ul class="simple">
<li><p>&lt;room&gt;_lockedKey - <em>[Public key pair]</em></p>
<ul>
<li><p>Generated if the owner “restricts” the room and stored in local
storage of accepted guests</p></li>
<li><p>Used to send an end-to-end encrypted message in restricted rooms.</p></li>
</ul>
</li>
<li><p>&lt;room&gt;_guestKey</p>
<ul>
<li><p>this is the public key of the <em>first</em> guest, used for purple
outline on messages</p></li>
<li><p>(note: as always, visitor needs to keep track of their private
half)</p></li>
</ul>
</li>
</ul>
<p>In addition to the above, every participant has in their
local_storage:</p>
<ul class="simple">
<li><p>&lt;room&gt; - <em>[Public key pair]</em></p>
<ul>
<li><p>This is the public/private pair used for all signing and
whispering of messages</p></li>
<li><p>In the case of this being the Owner, it will match the
&lt;room&gt;_ownerKey (public half) in the DO/KV_local</p></li>
<li><p>In the case of this being the Verified Guest (first visitor), it
similarly matches the &lt;room&gt;_guestKey</p></li>
<li><p>(We will refer to this key as the ‘&lt;room&gt;_participant’ key or
‘participant keys’ in this document)</p></li>
</ul>
</li>
</ul>
<p>In addition to all of the above, a ‘global’ ledgerKey (RSA keyPair) is
also generated.</p>
<ul class="simple">
<li><p>The public half is used to encrypt the storage token id by KV_local
after approving a storage request.</p></li>
<li><p>The private half is only available to offline systems to be used for
garbage collection and storage revocation.</p></li>
</ul>
</section>
<section id="message-structure">
<h2>Message Structure<a class="headerlink" href="#message-structure" title="Permalink to this headline">¶</a></h2>
<p>This is the basic message structure before end-to-end encryption:</p>
<p>These components are present in every message:</p>
<ul class="simple">
<li><p>encrypted - flag indicating if the message is whispered</p></li>
<li><p>contents - text part of the message (encrypted if whispered)</p></li>
<li><p>image - thumbnail image (encrypted if whispered)</p></li>
<li><p>imageMetaData - KV information for image (encrypted if whispered)</p></li>
<li><p>sender_pubKey - public key of the sender</p></li>
</ul>
<p>These components are present if the message is not whispered:</p>
<ul class="simple">
<li><p>sign - sign for contents (text part)</p></li>
<li><p>image_sign - sign for thumbnail image</p></li>
<li><p>imageMetaData_sign - sign for imageMetaData</p></li>
</ul>
<p>These components are present if the message is whispered to a guest by
the owner:</p>
<ul class="simple">
<li><p>recipient - public key of the recipient</p></li>
</ul>
<p>NOTE: The Message Structure section will be updated to account for
control messages once finalized.</p>
<div class="line-block">
<div class="line"><br/></div>
<div class="line"><br/></div>
</div>
<hr class="docutils"/>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="f010"><span class="brackets"><a class="fn-backref" href="#id6">1</a></span></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/library/secrets.html#generating-tokens">https://docs.python.org/3/library/secrets.html#generating-tokens</a></p>
</dd>
<dt class="label" id="f011"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Current token length of 48 bytes (512 random bits) is a
sufficiently large keyspace (10^154).</p>
</dd>
<dt class="label" id="f012"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p><a class="reference external" href="https://en.wikipedia.org/wiki/Uniform_Resource_Identifier">https://en.wikipedia.org/wiki/Uniform_Resource_Identifier</a></p>
</dd>
<dt class="label" id="f013"><span class="brackets"><a class="fn-backref" href="#id4">4</a></span></dt>
<dd><p><a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc4648.html">https://datatracker.ietf.org/doc/html/rfc4648.html</a></p>
</dd>
<dt class="label" id="f014"><span class="brackets"><a class="fn-backref" href="#id5">5</a></span></dt>
<dd><p>Let’s say we have 10 billion users, who each have one
billion unique rooms. Now let’s say somebody runs a ‘bot’
to guess room names. Let’s say each bot can guess one
billion rooms names per second (which the servers won’t
allow obviously) - and they could do that for year after
year for 15 billion years (the age of the Universe) - and
let’s say they had as many computers as there are atoms in
the Universe (10^85) to all do this in parallel. And each
computer can run one million ‘bots’ - then they would still
only have 0.0000000000000000000000000000000000000000001%
chance of guessing any room.</p>
</dd>
<dt class="label" id="f015"><span class="brackets"><a class="fn-backref" href="#id7">6</a></span></dt>
<dd><p>There is no way to assert the origin. Anybody can claim
that they were first to generate the name.</p>
</dd>
<dt class="label" id="f016"><span class="brackets"><a class="fn-backref" href="#id8">7</a></span></dt>
<dd><p>They also, by design, do not include any information about
their point of origin (what server created it).</p>
</dd>
<dt class="label" id="f017"><span class="brackets"><a class="fn-backref" href="#id10">8</a></span></dt>
<dd><p>Chrome has dropped it
<a class="reference external" href="https://bugs.chromium.org/p/chromium/issues/detail?id=478225">https://bugs.chromium.org/p/chromium/issues/detail?id=478225</a>
and NSS (Firefox) may or may not drop it
<a class="reference external" href="https://bugzilla.mozilla.org/show_bug.cgi?id=1128792">https://bugzilla.mozilla.org/show_bug.cgi?id=1128792</a></p>
</dd>
<dt class="label" id="f018"><span class="brackets"><a class="fn-backref" href="#id11">9</a></span></dt>
<dd><p><a class="reference external" href="https://csrc.nist.gov/csrc/media/events/ispab-march-2006-meeting/documents/e_barker-march2006-ispab.pdf">https://csrc.nist.gov/csrc/media/events/ispab-march-2006-meeting/documents/e_barker-march2006-ispab.pdf</a></p>
</dd>
<dt class="label" id="f019"><span class="brackets"><a class="fn-backref" href="#id12">10</a></span></dt>
<dd><p><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/deriveKey#ecdh">https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/deriveKey#ecdh</a></p>
</dd>
<dt class="label" id="f020"><span class="brackets"><a class="fn-backref" href="#id13">11</a></span></dt>
<dd><p>RFC6090 <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc6090">https://datatracker.ietf.org/doc/html/rfc6090</a></p>
</dd>
<dt class="label" id="f021"><span class="brackets"><a class="fn-backref" href="#id9">12</a></span></dt>
<dd><p><a class="reference external" href="https://cryptography.io/en/latest/hazmat/primitives/asymmetric/ec/?highlight=generate_private_key#cryptography.hazmat.primitives.asymmetric.ec.generate_private_key">https://cryptography.io/en/latest/hazmat/primitives/asymmetric/ec/?highlight=generate_private_key#cryptography.hazmat.primitives.asymmetric.ec.generate_private_key</a></p>
</dd>
<dt class="label" id="f022"><span class="brackets"><a class="fn-backref" href="#id14">13</a></span></dt>
<dd><p><a class="reference external" href="https://jwcrypto.readthedocs.io/en/latest">https://jwcrypto.readthedocs.io/en/latest</a>/#
(The randomness of that might be a slight issue.)</p>
</dd>
<dt class="label" id="f023"><span class="brackets"><a class="fn-backref" href="#id15">14</a></span></dt>
<dd><p>In a future extension, the Owner will be able to hand back
“ultimate ownership” to the SSO server by providing the
private key to the SSO, in which case the SSO is again
managing the keys for the Owner. The primary use case for
this is server migration - the design details of which are
under development.</p>
</dd>
<dt class="label" id="f024"><span class="brackets"><a class="fn-backref" href="#id16">15</a></span></dt>
<dd><p>Please also see discussion <a class="reference internal" href="discussion.html#end-to-end-encryption"><span class="std std-ref">‘what do we mean by
end-to-end encryption’</span></a>.</p>
</dd>
</dl>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="system-architecture.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">System Architecture</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="install.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installation</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2019-2022, Magnusson Institute |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="_sources/core-doc.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Technical Details</a><ul>
<li><a class="reference internal" href="#rooms">Rooms</a></li>
<li><a class="reference internal" href="#room-and-user-keys">Room and User Keys</a></li>
<li><a class="reference internal" href="#message-structure">Message Structure</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>